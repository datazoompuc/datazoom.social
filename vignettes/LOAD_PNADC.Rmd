---
title: "LOAD_PNADC"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{MAPBIOMAS}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```


**Description**

We created this function in order to integrate the [*`get_pnadc`*](https://www.rdocumentation.org/packages/PNADcIBGE/versions/0.7.0/topics/get_pnadc) function with the logic process of applying a panel structure to PNADc datasets.

The function not only download the PNADc files for the given quarters of a given year. It processes and generates panel data from the PNAD (National Household Sample Survey) dataset for specified years and quarters. The function also reads the data and divides all the observations by which panel they belong (variable `V1014` shows that). The goal is to organize and store the data frames in a structured manner for further analysis. 

The function performs by the following steps:

  1. Create two parallel vector of years and quarters for futher loop.
  2. Loop over the two vectors with the get_pnadc to download the data for each quarter of the year and save in the directory.
  3. Register, for every quarter, the panel's which the quarter's observations are included using variable `V1014`.
  4. Spliting data into panels.
  5. Read each file and apply the identification algorithms defined in the `build_pnadc_panel`.
  

***
**Options:**

  1. **save_to**: The directory in which the user desires to save the downloaded files.


  2. **year**: The years of the PNADc the user would like to download.
 

  3. **quarter**: The quarters within those years to be downloaded.


  4. **panel**: Which panel algorithm to apply to this data. There are three options:
     * `none`: No panel build. Returns the original data.
     * `basic`: Performs basic identification steps for creating households and individual identifiers for panel construction
     * `advanced`: Performs advanced identification steps for creating households and individual identifiers for panel construction.
  
  
  5. **raw_data**: A command to define if the user would like to download the raw or treated data. There are two options:
     * `TRUE`: if you want the data as it is originally.
     * `FALSE`: if you want the treated version of the data.
     
***

**Examples:** 
 
```{r eval=FALSE}
# Download treated basic panel from 2016 year
data <- load_pnadc(save_to = "Directory/You/Would/like/to/save/the/files",
                   year = 2016,
                   quarter = 1:4,
                   panel = "basic",
                   raw_data = FALSE)
```
 
 
 
